# MenZ-ReazonSpeech 設定ファイル
# このファイルで音声認識システムの動作をカスタマイズできます
# 設定を変更した後は、プログラムを再起動してください

[model]
# 使用する音声認識モデル
# reazon-research/reazonspeech-nemo-v2: 日本語特化の高性能音声認識モデル
name = reazon-research/reazonspeech-nemo-v2

# モデルファイルのキャッシュディレクトリ
# 初回実行時にモデルがダウンロードされ、このディレクトリに保存されます
cache_dir = ./models

[audio]
# 音声サンプリングレート（Hz）
# 16000Hz: 標準的な音声認識用サンプルレート
sample_rate = 16000

# 音声処理チャンクサイズ（サンプル数）
# 一度に処理する音声サンプル数
chunk_size = 1024

# VADフレーム期間（ミリ秒）
# VADで音声検出を行うフレームの長さ
frame_duration_ms = 30

# Silero VAD感度レベル（0-3）
# 0: 最も厳格（0.3）、1: 厳格（0.4）、2: 標準（0.5）、3: 緩い（0.6）
# より多くの音声を拾うため、緩い設定に変更
vad_level = 0

[silero_vad]
# Silero VAD settings (エンタープライズグレード)
# 音声検出閾値（0.0-1.0）
# 低い値: より敏感（多くの音声を検出）
# 高い値: より厳格（確実な音声のみ検出）
threshold = 0.05

# 音声区間検出の最小長さ（ミリ秒）
# 短い音声（「はい」等）を検出するには短く設定
min_speech_duration_ms = 10

# 無音区間の最小長さ（ミリ秒）
# 発話の区切りを判定する無音の長さ
min_silence_duration_ms = 50

[inference]
# 使用デバイス
# auto: 自動選択（推奨）
# cpu: CPU使用
# cuda: GPU使用（CUDA対応GPUが必要）
# mps: Apple Silicon GPU使用（macOS）
device = cpu

# GPU ID（cudaデバイス使用時のみ有効）
# 0, 1, 2...: 特定のGPU番号を指定
# auto: 自動選択（メモリ使用量が最も少ないGPU）
gpu_id = auto

# 混合精度（FP16）を使うか（CUDA時のみ有効）
float16 = false

[recognizer]
# 音声検出の設定

# 音声レベル最小閾値（0.0-1.0）
# キータッチ音や雑音除去のための音声レベル閾値
# 0.001未満: 極めて小さい音（キータッチ音等）
# 0.003以上: 小さな声も含む
# より多くの音声を拾うため、非常に低い閾値に設定
min_audio_level = 0.0001

# 無音継続時間（0.1秒単位）
# フレーズの終わりとして認識される無音の最小の長さ
# 値を大きくして、短い間の取り方でセグメントが切れないようにする
# より長い発話を一つのセグメントとして認識（0.8秒）
pause_threshold = 8

# 最小音声継続時間（0.1秒単位）
# 発話音声をフレーズとみなすまでの発話音声の最小秒数
# より短い発話も認識するため、さらに短く設定（0.5秒）
# 短い相槌や単語も拾いやすくする
phrase_threshold = 5

# 最大音声継続時間（秒）
# これより長い音声セグメントは分割されます
# Whisperの最大処理時間制限（25秒）を考慮
max_duration = 30.0

# 先頭/末尾パディング（ms）
# 先頭欠け対策: 発話開始前に直近の音を付加（推奨: 300）
# 語尾欠け対策: 終了時に少量の無音を付加（推奨: 150）
pre_speech_padding_ms = 300
post_speech_padding_ms = 150

[websocket]
# WebSocket MCP接続設定
# zagaroidサーバーに接続してJSON-RPC 2.0通信を行います

# 接続先ホスト
# localhost: 同一PC内のアプリケーション
# IPアドレス: ネットワーク経由での接続
host = 192.168.1.6
#host = 127.0.0.1

# 接続先ポート番号
# zagaroidのMCPサーバーポート: 50001
port = 50001

[filtering]
# 基本的なテキストフィルタリング設定

# 最小文字数フィルタ
# この文字数未満の認識結果は除外されます（ノイズ除去）
# 1にして「うん」「あっ」などの短いフィラーも表示する
min_length = 3

# 空白のみの結果を除外
# true: 空白のみの結果を除外、false: 除外しない
exclude_whitespace_only = true

[debug]
# デバッグ情報表示
# true: 音声レベル、プログレスバー、デバッグ情報を表示
# false: デバッグ情報を非表示
# エラー修正完了のため、通常動作に戻す
show_debug = true

# 翻訳テキスト表示
# true: 翻訳テキストを表示
# false: 翻訳テキストを非表示
show_transcription = true

